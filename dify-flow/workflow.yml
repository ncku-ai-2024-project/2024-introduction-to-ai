app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: æ•‘æ•‘æœŸæœ«å ±å‘Š
  use_icon_as_answer_icon: false
kind: app
version: 0.1.4
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - remote_url
      - local_file
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - remote_url
        - local_file
      number_limits: 3
    opening_statement: æ‚¨å¥½ï¼æˆ‘æ˜¯å°ˆé–€ç‚ºæˆå¤§å­¸ç”Ÿè¨­è¨ˆçš„é¸èª²è«®è©¢æ©Ÿå™¨äººï¼Œæ—¨åœ¨å”åŠ©æ‚¨äº†è§£é¸èª²æ™‚ç¨‹ã€è¦å®šåŠèª²ç¨‹è³‡è¨Šã€‚æˆ‘å¯ä»¥å›ç­”æœ‰é—œé¸èª²æµç¨‹ã€æŠ½ç±¤æ–¹å¼ã€å¿…ä¿®èª²ç¨‹è¦æ±‚ç­‰å•é¡Œï¼Œå¹«åŠ©æ‚¨é †åˆ©å®Œæˆé¸èª²ä½œæ¥­ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘å•ï¼Œéš¨æ™‚å¯ä»¥å•æˆ‘ï¼
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      configs: []
      enabled: false
      type: ''
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: llm
        targetType: if-else
      id: 1730963244000-source-1730963395148-target
      selected: false
      source: '1730963244000'
      sourceHandle: source
      target: '1730963395148'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 1730963395148-false-1730963718583-target
      selected: false
      source: '1730963395148'
      sourceHandle: 'false'
      target: '1730963718583'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: start
        targetType: question-classifier
      id: start-source-1733739004049-target
      selected: false
      source: start
      sourceHandle: source
      target: '1733739004049'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: if-else
      id: 17337393813133-source-17337393813134-target
      selected: false
      source: '17337393813133'
      sourceHandle: source
      target: '17337393813134'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 17337393813134-false-17337393813135-target
      selected: false
      source: '17337393813134'
      sourceHandle: 'false'
      target: '17337393813135'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: llm
      id: 1733739004049-1-1730963244000-target
      source: '1733739004049'
      sourceHandle: '1'
      target: '1730963244000'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: question-classifier
        targetType: llm
      id: 1733739004049-2-17337393813133-target
      source: '1733739004049'
      sourceHandle: '2'
      target: '17337393813133'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: variable-aggregator
      id: llm-source-1733842869479-target
      source: llm
      sourceHandle: source
      target: '1733842869479'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1730963718583-source-1733842869479-target
      source: '1730963718583'
      sourceHandle: source
      target: '1733842869479'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: variable-aggregator
        targetType: llm
      id: 1733842869479-source-1733842890322-target
      source: '1733842869479'
      sourceHandle: source
      target: '1733842890322'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: answer
      id: 1733842890322-source-1733842903857-target
      source: '1733842890322'
      sourceHandle: source
      target: '1733842903857'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: variable-aggregator
      id: 17337393813131-source-1733842869479-target
      source: '17337393813131'
      sourceHandle: source
      target: '1733842869479'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: variable-aggregator
      id: 17337393813135-source-1733842869479-target
      source: '17337393813135'
      sourceHandle: source
      target: '1733842869479'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: knowledge-retrieval
      id: 1730963395148-true-1733843746036-target
      source: '1730963395148'
      sourceHandle: 'true'
      target: '1733843746036'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: knowledge-retrieval
        targetType: llm
      id: 1733843746036-source-llm-target
      source: '1733843746036'
      sourceHandle: source
      target: llm
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: knowledge-retrieval
      id: 17337393813134-true-1733843773964-target
      source: '17337393813134'
      sourceHandle: 'true'
      target: '1733843773964'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: knowledge-retrieval
        targetType: llm
      id: 1733843773964-source-17337393813131-target
      source: '1733843773964'
      sourceHandle: source
      target: '17337393813131'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: START
        type: start
        variables: []
      height: 53
      id: start
      position:
        x: 30
        y: 305.5
      positionAbsolute:
        x: 30
        y: 305.5
      selected: false
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1733843746036'
          - result
        desc: å•é¡Œèˆ‡çŸ¥è­˜åº«å…§å®¹ç›¸é—œï¼Œåˆ©ç”¨çŸ¥è­˜åº«çš„å…§å®¹å›ç­”å•é¡Œã€‚
        memory:
          query_prompt_template: '{{#sys.query#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
        model:
          completion_params:
            stop: []
          mode: chat
          name: gpt-4o-mini
          provider: openai
        prompt_template:
        - id: 77af917f-d3b4-4b3d-a396-9db82411b462
          role: user
          text: 'Use the following context as your learned knowledge, inside <context></context>
            XML tags.


            <context>

            {{#context#}}

            </context>


            When answer to user:

            - If you don''t know, just say that you don''t know.

            - If you don''t know when you are not sure, ask for clarification.

            Avoid mentioning that you obtained the information from the context.

            And answer according to the language of the user''s question.

            '
        selected: false
        title: LLM 3
        type: llm
        vision:
          configs: null
          enabled: false
          variable_selector: null
      height: 141
      id: llm
      position:
        x: 1547
        y: 486.5
      positionAbsolute:
        x: 1547
        y: 486.5
      selected: false
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ç”¨ä¾†åˆ¤æ–·æ˜¯å¦æœ‰ç”¨åˆ°RAGã€‚
        memory:
          query_prompt_template: '{{#sys.query#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: openai
        prompt_template:
        - id: 497af01b-9216-4175-b3f3-f8d367f14943
          role: system
          text: 'You are an AI assistant tasked with determining whether a given query
            is related to specific topics

            concerning National Cheng Kung University (NCKU). Your job is to respond
            with either "True" or

            "False" based on the content of the query.


            Here is the query you need to evaluate:

            <query>

            {{#sys.query#}}

            </query>


            Evaluate the query and determine if it is related to any of the following
            topics concerning NCKU:

            - Course registration rules

            - Course information

            - Course content

            - Professors or instructors

            - Names of individuals associated with the university

            - Class locations

            - Class schedules or times


            If the query is related to one or more of these topics, respond with "True".
            If the query is not

            related to any of these topics or is about something else entirely, respond
            with "False".


            Your response should be either "True" or "False" without any additional
            explanation or content. Do

            not include any other words or punctuation in your response.


            <answer>'
        selected: false
        title: LLM 1
        type: llm
        variables: []
        vision:
          enabled: false
      height: 125
      id: '1730963244000'
      position:
        x: 636.5
        y: 305.5
      positionAbsolute:
        x: 636.5
        y: 305.5
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: 622cef32-5a64-4c60-9b97-d079e3982654
            value: 'True'
            varType: string
            variable_selector:
            - '1730963244000'
            - text
          id: 'true'
          logical_operator: and
        desc: 'å¦‚æœå•é¡Œèˆ‡çŸ¥è­˜åº«ç›¸é—œï¼Œå‰‡èµ°IFè·¯ç·šã€‚

          å¦å‰‡èµ°ELSEè·¯ç·šã€‚'
        selected: false
        title: æ¢ä»¶åˆ†æ”¯ 1
        type: if-else
      height: 169
      id: '1730963395148'
      position:
        x: 940.5
        y: 305.5
      positionAbsolute:
        x: 940.5
        y: 305.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: å…§å®¹èˆ‡çŸ¥è­˜åº«å…§å®¹ç„¡é—œï¼Œç›´æ¥å›ç­”å•é¡Œã€‚
        memory:
          query_prompt_template: ''
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: openai
        prompt_template:
        - id: 9ba31069-be51-4e8a-ab11-41fadcadcd2f
          role: system
          text: è«‹ç”¨å°ˆæ¥­çš„å£å»å›ç­”ä½¿ç”¨è€…çš„å•é¡Œï¼Œä¸çŸ¥é“å°±èªªä¸çŸ¥é“ï¼Œä¸è¦äº‚è¬›è©±
        selected: false
        title: LLM 4
        type: llm
        variables: []
        vision:
          enabled: false
      height: 141
      id: '1730963718583'
      position:
        x: 1547
        y: 305.5
      positionAbsolute:
        x: 1547
        y: 305.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        classes:
        - id: '1'
          name: é¸èª²**è¦å®š**ç›¸é—œå•é¡Œ
        - id: '2'
          name: èª²ç¨‹è³‡è¨Šã€èª²ç¨‹å…§å®¹ç›¸é—œå•é¡Œ
        desc: ''
        instruction: ä½ æ˜¯ä¸€å€‹å›ç­”åœ‹ç«‹æˆåŠŸå¤§å­¸èª²ç¨‹ç›¸é—œç–‘å•çš„chatbotï¼Œä½ çš„ä»»å‹™æ˜¯å°‡ä½¿ç”¨è€…çš„æå•æ•´ç†æ­¸ç´å¾Œï¼Œå°‡å•é¡Œåˆ†é¡æˆ"èª²ç¨‹è¦å®šç›¸é—œå•é¡Œ"æˆ–æ˜¯"èª²ç¨‹è³‡è¨Šã€èª²ç¨‹å…§å®¹ç›¸é—œå•é¡Œ"ã€‚
        instructions: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: openai
        query_variable_selector:
        - start
        - sys.query
        selected: false
        title: å•é¡Œåˆ†é¡å™¨
        topics: []
        type: question-classifier
        vision:
          enabled: false
      height: 175
      id: '1733739004049'
      position:
        x: 333
        y: 305.5
      positionAbsolute:
        x: 333
        y: 305.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1733843773964'
          - result
        desc: å•é¡Œèˆ‡çŸ¥è­˜åº«å…§å®¹ç›¸é—œï¼Œåˆ©ç”¨çŸ¥è­˜åº«çš„å…§å®¹å›ç­”å•é¡Œã€‚
        memory:
          query_prompt_template: '{{#sys.query#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
        model:
          completion_params:
            stop: []
          mode: chat
          name: gpt-4o-mini
          provider: openai
        prompt_template:
        - id: 77af917f-d3b4-4b3d-a396-9db82411b462
          role: user
          text: 'Use the following context as your learned knowledge, inside <context></context>
            XML tags.


            <context>

            {{#context#}}

            </context>


            When answer to user:

            - If you don''t know, just say that you don''t know.

            - If you don''t know when you are not sure, ask for clarification.

            Avoid mentioning that you obtained the information from the context.

            And answer according to the language of the user''s question.

            '
        selected: false
        title: LLM 5
        type: llm
        variables: []
        vision:
          configs: null
          enabled: false
          variable_selector: null
      height: 141
      id: '17337393813131'
      position:
        x: 1555.6612375229165
        y: 794.1815968119794
      positionAbsolute:
        x: 1555.6612375229165
        y: 794.1815968119794
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ç”¨ä¾†åˆ¤æ–·æ˜¯å¦æœ‰ç”¨åˆ°RAGã€‚
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: openai
        prompt_template:
        - id: 497af01b-9216-4175-b3f3-f8d367f14943
          role: system
          text: 'You are an AI assistant tasked with determining whether a given query
            is related to specific topics

            concerning National Cheng Kung University (NCKU). Your job is to respond
            with either "True" or

            "False" based on the content of the query.


            Here is the query you need to evaluate:

            <query>

            {{#sys.query#}}

            </query>


            Evaluate the query and determine if it is related to any of the following
            topics concerning NCKU:

            - Course registration rules

            - Course information

            - Course content

            - Professors or instructors

            - Names of individuals associated with the university

            - Class locations

            - Class schedules or times


            If the query is related to one or more of these topics, respond with "True".
            If the query is not

            related to any of these topics or is about something else entirely, respond
            with "False".


            Your response should be either "True" or "False" without any additional
            explanation or content. Do

            not include any other words or punctuation in your response.


            <answer>

            '
        selected: false
        title: LLM 2
        type: llm
        variables: []
        vision:
          enabled: false
      height: 125
      id: '17337393813133'
      position:
        x: 636.5
        y: 656.5
      positionAbsolute:
        x: 636.5
        y: 656.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: 8c5e48c9-b3a7-4a1f-97be-ee42a7d688fa
            value: 'True'
            varType: string
            variable_selector:
            - '17337393813133'
            - text
          id: 'true'
          logical_operator: and
        desc: 'å¦‚æœå•é¡Œèˆ‡çŸ¥è­˜åº«ç›¸é—œï¼Œå‰‡èµ°IFè·¯ç·šã€‚

          å¦å‰‡èµ°ELSEè·¯ç·šã€‚'
        selected: false
        title: æ¢ä»¶åˆ†æ”¯ 2
        type: if-else
      height: 169
      id: '17337393813134'
      position:
        x: 940.5
        y: 656.5
      positionAbsolute:
        x: 940.5
        y: 656.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: å…§å®¹èˆ‡çŸ¥è­˜åº«å…§å®¹ç„¡é—œï¼Œç›´æ¥å›ç­”å•é¡Œã€‚
        memory:
          query_prompt_template: ''
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: openai
        prompt_template:
        - id: 9ba31069-be51-4e8a-ab11-41fadcadcd2f
          role: system
          text: è«‹ç”¨å°ˆæ¥­çš„å£å»å›ç­”ä½¿ç”¨è€…çš„å•é¡Œï¼Œä¸çŸ¥é“å°±èªªä¸çŸ¥é“ï¼Œä¸è¦äº‚è¬›è©±
        selected: false
        title: LLM 6
        type: llm
        variables: []
        vision:
          enabled: false
      height: 141
      id: '17337393813135'
      position:
        x: 1555.6612375229165
        y: 645.5
      positionAbsolute:
        x: 1555.6612375229165
        y: 645.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        advanced_settings:
          group_enabled: true
          groups:
          - groupId: 9e5fa042-9c4a-4822-bdc6-176375a66dda
            group_name: LLM
            output_type: string
            variables:
            - - '1730963718583'
              - text
            - - llm
              - text
            - - '17337393813131'
              - text
            - - '17337393813135'
              - text
        desc: ''
        output_type: string
        selected: false
        title: è®Šé‡èšåˆå™¨
        type: variable-aggregator
        variables:
        - - '1730963718583'
          - text
        - - llm
          - text
        - - '17337393813131'
          - text
        - - '17337393813135'
          - text
      height: 174
      id: '1733842869479'
      position:
        x: 1953.3828519497333
        y: 479.44575089955094
      positionAbsolute:
        x: 1953.3828519497333
        y: 479.44575089955094
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1733842869479'
          - LLM
          - output
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: ft:gpt-4o-mini-2024-07-18:gdg-on-campus-ncku::AcDl4vvp
          provider: openai
        prompt_template:
        - id: ce7cd23e-82fa-4dd8-b944-060a36cb5ac5
          role: system
          text: 'ä½ æ˜¯ä¸€ä½çˆ¸æ¯”æˆ–åª½å’ªï¼Œç¸½æ˜¯ç”¨è€å¿ƒå’Œæ„›å¿ƒå›ç­”å¥³éµå’Œéµå­çš„å•é¡Œï¼Œç”¨ç¹é«”ä¸­æ–‡äº¤æµã€‚


            '
        - id: e10c90df-825c-4c22-a706-33e4caf9f235
          role: user
          text: 'è«‹å°‡ä»¥ä¸‹çš„å…§å®¹ç”¨å¯æ„›çš„èªæ°£æ½¤é£¾ã€‚å‹™å¿…ç›´æ¥è¼¸å‡ºçµæœã€‚

            """{{#context#}}"""'
        selected: false
        title: finetune
        type: llm
        variables: []
        vision:
          enabled: false
      height: 97
      id: '1733842890322'
      position:
        x: 2153
        y: 305.5
      positionAbsolute:
        x: 2153
        y: 305.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1733842890322.text#}}'
        desc: ''
        selected: false
        title: ç›´æ¥å›è¦† 4
        type: answer
        variables: []
      height: 102
      id: '1733842903857'
      position:
        x: 2456
        y: 305.5
      positionAbsolute:
        x: 2456
        y: 305.5
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - 66b0b48a-8126-43a5-9c28-0cafe73718d7
        desc: ''
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: weighted_score
          score_threshold: null
          top_k: 10
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: openai
              vector_weight: 0.7
        query_variable_selector:
        - start
        - sys.query
        retrieval_mode: multiple
        selected: false
        title: Knowledge Retrieval 1
        type: knowledge-retrieval
      height: 91
      id: '1733843746036'
      position:
        x: 1256.2975774311394
        y: 480.6801342318815
      positionAbsolute:
        x: 1256.2975774311394
        y: 480.6801342318815
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset_ids:
        - 42b3acf2-7c6d-4ad9-8fc1-adda9078f316
        desc: ''
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: weighted_score
          score_threshold: null
          top_k: 10
          weights:
            keyword_setting:
              keyword_weight: 0.3
            vector_setting:
              embedding_model_name: text-embedding-3-large
              embedding_provider_name: openai
              vector_weight: 0.7
        query_variable_selector:
        - sys
        - query
        retrieval_mode: multiple
        selected: false
        title: Knowledge Retrieval 2
        type: knowledge-retrieval
      height: 91
      id: '1733843773964'
      position:
        x: 1256.2975774311394
        y: 887.0228655307399
      positionAbsolute:
        x: 1256.2975774311394
        y: 887.0228655307399
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 53.21669676290219
      y: 51.25417403700352
      zoom: 0.35000000000000037
